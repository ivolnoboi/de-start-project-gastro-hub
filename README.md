# Сеть ресторанов Gastro Hub
Учебный проект в рамках курса "Инженер данных с нуля" от Яндекс практикума.

## Описание проекта
Gastro Hub — корпорация, которая управляет заведениями общественого питания. В неё входят рестораны, бары, пиццерии и кофейни.

Данной корпорации необходима база данных, которая поможет оптимизировать работу компании.

Были даны сырые, необработанные данные, по которым были построены новые таблицы, представления, материализованные представления и аналитические запросы.


## Описание сырых данных
### raw_data 
Cхема, хранящая сырые данные.

#### raw_data.sales
Таблица, хранящая необработанные данные о продажах.

| Поле | Тип | Описание |
| --- | --- | --- |
| `report_date` | `date` | Дата |
| `cafe_name` | `character varying` | Название заведения |
| `type` | `character varying` | Тип заведения (пиццерия, бар, кофейня, ресторан) |
| `avg_check` | `numeric(6, 2)` | Средний чек за день |
| `manager` | `character varying` | Ф.И.О. менеджера заведения |
| `manager_phone` | `character varying` | Номер телефона менеджера |

#### raw_data.menu
Таблица, хранящая необработанные данные о меню заведений.

| Поле | Тип | Описание |
| --- | --- | --- |
| `cafe_name` | `character varying` | Название заведения |
| `menu` | `jsonb` | Меню |

## Создание схемы и таблиц
Создание схемы и таблиц для Gastro Hub находится в файле [DDL.sql](https://github.com/ivolnoboi/de-start-project-gastro-hub/blob/main/DDL.sql).

### Схема cafe
Содержит все необходимые таблицы.

![](https://github.com/ivolnoboi/de-start-project-gastro-hub/raw/main/img/schema_cafe.png)

#### cafe.restaurants
Таблица, хранящая в себе информацию о заведениях общепита.
| Поле | Тип | Описание |
| --- | --- | --- |
| `restaurant_uuid` | `uuid` | ID заведения, первичный ключ |
| `name` | `character varying` | Название заведения |
| `type` | `cafe.restaurant_type` | Тип заведения |
| `menu` | `jsonb` | Меню |

*cafe.restaurant_type — тип enum, созданный для типа заведения (coffee_shop, restaurant, bar, pizzeria).*

#### cafe.managers
Таблица, хранящая в себе информацию о менеджерах.

| Поле | Тип | Описание |
| --- | --- | --- |
| `manager_uuid` | `uuid` | ID менеджера, первичный ключ |
| `name ` | `character varying` | Ф.И.О. менеджера |
| `phone` | `character varying` | Номер телефона менеджера |

#### cafe.restaurant_manager_work_dates
Таблица, хранящая в себе информацию о сроках работы менеджеров в заведениях.

| Поле | Тип | Описание |
| --- | --- | --- |
| `restaurant_uuid` | `uuid` | ID заведения, внешний ключ на таблицу restaurants |
| `manager_uuid` | `uuid` | ID менеджера, внешний ключ на таблицу managers |
| `start_work_date` | `date` | Дата начала работы |
| `end_work_date` | `date` | Дата окончания работы |

*Первичный ключ для данной таблицы является составным из полей restaurant_uuid и manager_uuid.*

#### cafe.sales
Таблица с информацией о продажах.

| Поле | Тип | Описание |
| --- | --- | --- |
| `date` | `date` | Дата продажи |
| `restaurant_uuid` | `uuid` | ID заведения, внешний ключ на таблицу restaurants |
| `avg_check` | `numeric(6, 2)` | Средний чек за день |

*Первичный ключ для данной таблицы является составным из полей date и restaurant_uuid.*

## Наполнение таблиц данными
Находится в файле [INSERT.sql](https://github.com/ivolnoboi/de-start-project-gastro-hub/blob/main/INSERT.sql).

## Задания
В файлах task_1.sql - task_7.sql находятся решения заданий на создание представлений и материализованных представлений, на использование транзакций и аналитические запросы.


